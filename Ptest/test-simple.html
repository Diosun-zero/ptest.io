<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>简易版测试 - PHILOS哲学人格测试</title>
    <link rel="stylesheet" href="assets/css/main.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;600;700&family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container test-container">
        <!-- 标题区域 -->
        <section class="mt-4">
            <h1 class="text-center">简易版测试</h1>
            <p class="text-center text-muted">25题 · 约10分钟</p>
        </section>

        <!-- 进度条 -->
        <section class="mt-4">
            <div class="progress-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <div class="text-center text-muted" id="progressText">1/25</div>
        </section>

        <!-- 题目区域 -->
        <section class="mt-6 question-container">
            <div class="question-number" id="questionNumber">第1题</div>
            <div class="question-text" id="questionText">世界的本质是固定不变的，还是处于不断变化之中？</div>
            <div class="option-container">
                <button class="option-btn" id="optionA" onclick="selectOption('A')">
                    世界有固定的本质和真理
                </button>
                <button class="option-btn" id="optionB" onclick="selectOption('B')">
                    世界处于永恒的变化之中
                </button>
            </div>
        </section>

        <!-- 导航按钮 -->
        <section class="nav-buttons">
            <button class="btn btn-outline" id="prevBtn" onclick="prevQuestion()">上一题</button>
            <button class="btn btn-accent" id="submitBtn" onclick="submitTest()" style="display: none;">提交测试</button>
            <button class="btn btn-primary" id="nextBtn" onclick="nextQuestion()">下一题</button>
        </section>

        <!-- 暂停按钮 -->
        <section class="mt-4 text-center">
            <button class="btn btn-outline" onclick="pauseTest()">暂停测试</button>
        </section>
    </div>

    <!-- 页脚 -->
    <footer class="footer">
        <div class="footer-content">
            <p class="footer-text">PHILOS哲学人格测试 &copy; 2026</p>
            <p class="footer-text">探索思想根源，发现哲学自我</p>
        </div>
    </footer>

    <script>
        // 简易版测试逻辑
        let currentQuestion = 0;
        let answers = {};
        let questions = [];

        // 初始化测试
        document.addEventListener('DOMContentLoaded', function() {
            // 加载题目数据
            loadQuestions();
            
            // 加载保存的进度
            loadProgress();
            
            // 显示当前题目
            showQuestion();
            
            // 绑定离开页面事件
            window.addEventListener('beforeunload', function(e) {
                if (currentQuestion < questions.length - 1) {
                    e.preventDefault();
                    e.returnValue = '';
                    return '';
                }
            });
        });

        // 加载题目数据
        function loadQuestions() {
            // 这里会在questions.js创建后替换为真实数据
            // 临时占位题目
            questions = [
                {
                    id: 1,
                    category: "reality",
                    question: "世界的本质是固定不变的，还是处于不断变化之中？",
                    options: [
                        {text: "世界有固定的本质和真理", value: "U"},
                        {text: "世界处于永恒的变化之中", value: "V"}
                    ]
                },
                {
                    id: 2,
                    category: "cognition",
                    question: "你认为认识世界的主要方式是什么？",
                    options: [
                        {text: "通过逻辑和推理", value: "R"},
                        {text: "通过感受和经验", value: "X"}
                    ]
                },
                {
                    id: 3,
                    category: "ethics",
                    question: "判断行为对错的标准应该是什么？",
                    options: [
                        {text: "行为的结果和影响", value: "G"},
                        {text: "行为是否符合道德原则", value: "D"}
                    ]
                },
                {
                    id: 4,
                    category: "society",
                    question: "在社会中，个人与集体的关系应该是怎样的？",
                    options: [
                        {text: "集体利益优先于个人利益", value: "O"},
                        {text: "个人自由和差异应该被尊重", value: "M"}
                    ]
                },
                {
                    id: 5,
                    category: "reality",
                    question: "你认为真理是绝对的还是相对的？",
                    options: [
                        {text: "存在绝对的真理", value: "U"},
                        {text: "真理是相对的，取决于情境", value: "V"}
                    ]
                },
                {
                    id: 6,
                    category: "cognition",
                    question: "在做重要决定时，你更依赖什么？",
                    options: [
                        {text: "理性分析和逻辑思考", value: "R"},
                        {text: "直觉和个人感受", value: "X"}
                    ]
                },
                {
                    id: 7,
                    category: "ethics",
                    question: "你认为道德规则应该是怎样的？",
                    options: [
                        {text: "根据具体情况灵活调整", value: "G"},
                        {text: "应该有普遍适用的原则", value: "D"}
                    ]
                },
                {
                    id: 8,
                    category: "society",
                    question: "你如何看待社会秩序？",
                    options: [
                        {text: "秩序和统一很重要", value: "O"},
                        {text: "多样性和自由更重要", value: "M"}
                    ]
                },
                {
                    id: 9,
                    category: "reality",
                    question: "你认为事物的本质是否可知？",
                    options: [
                        {text: "通过理性可以认识事物的本质", value: "U"},
                        {text: "事物的本质是不断变化的，难以完全认识", value: "V"}
                    ]
                },
                {
                    id: 10,
                    category: "cognition",
                    question: "你更相信哪种知识来源？",
                    options: [
                        {text: "科学和逻辑推理", value: "R"},
                        {text: "个人经验和直觉", value: "X"}
                    ]
                },
                {
                    id: 11,
                    category: "ethics",
                    question: "在面对道德困境时，你会怎么做？",
                    options: [
                        {text: "考虑哪种选择能带来最好的结果", value: "G"},
                        {text: "遵循道德原则，不管结果如何", value: "D"}
                    ]
                },
                {
                    id: 12,
                    category: "society",
                    question: "你认为理想的社会应该是什么样的？",
                    options: [
                        {text: "和谐统一，共同目标", value: "O"},
                        {text: "多元包容，个性自由", value: "M"}
                    ]
                },
                {
                    id: 13,
                    category: "reality",
                    question: "你认为变化是表面的还是本质的？",
                    options: [
                        {text: "变化是表面的，本质不变", value: "U"},
                        {text: "变化是本质的，一切都在流动", value: "V"}
                    ]
                },
                {
                    id: 14,
                    category: "cognition",
                    question: "你如何看待抽象思维和具体经验？",
                    options: [
                        {text: "抽象思维更能把握本质", value: "R"},
                        {text: "具体经验更真实可靠", value: "X"}
                    ]
                },
                {
                    id: 15,
                    category: "ethics",
                    question: "你认为道德价值的来源是什么？",
                    options: [
                        {text: "行为的后果和效用", value: "G"},
                        {text: "内在的道德义务", value: "D"}
                    ]
                },
                {
                    id: 16,
                    category: "society",
                    question: "你如何看待社会中的差异和分歧？",
                    options: [
                        {text: "应该寻求共识和统一", value: "O"},
                        {text: "差异是正常且有价值的", value: "M"}
                    ]
                },
                {
                    id: 17,
                    category: "reality",
                    question: "你认为宇宙是否有目的和秩序？",
                    options: [
                        {text: "宇宙有内在的秩序和目的", value: "U"},
                        {text: "宇宙是随机和无目的的", value: "V"}
                    ]
                },
                {
                    id: 18,
                    category: "cognition",
                    question: "你更重视理论知识还是实践经验？",
                    options: [
                        {text: "理论知识更基础", value: "R"},
                        {text: "实践经验更重要", value: "X"}
                    ]
                },
                {
                    id: 19,
                    category: "ethics",
                    question: "你认为道德判断应该基于什么？",
                    options: [
                        {text: "最大多数人的最大幸福", value: "G"},
                        {text: "普遍的道德法则", value: "D"}
                    ]
                },
                {
                    id: 20,
                    category: "society",
                    question: "你如何看待个人权利和社会责任？",
                    options: [
                        {text: "社会责任优先于个人权利", value: "O"},
                        {text: "个人权利应该得到保障", value: "M"}
                    ]
                },
                {
                    id: 21,
                    category: "reality",
                    question: "你认为本质和现象的关系是怎样的？",
                    options: [
                        {text: "本质决定现象", value: "U"},
                        {text: "现象就是本质，没有固定本质", value: "V"}
                    ]
                },
                {
                    id: 22,
                    category: "cognition",
                    question: "你如何看待逻辑和情感在认识中的作用？",
                    options: [
                        {text: "逻辑是认识的基础", value: "R"},
                        {text: "情感和直觉同样重要", value: "X"}
                    ]
                },
                {
                    id: 23,
                    category: "ethics",
                    question: "你认为道德是否具有普遍性？",
                    options: [
                        {text: "道德原则应该普遍适用", value: "D"},
                        {text: "道德因文化和情境而异", value: "G"}
                    ]
                },
                {
                    id: 24,
                    category: "society",
                    question: "你如何看待传统和创新的关系？",
                    options: [
                        {text: "传统是社会稳定的基础", value: "O"},
                        {text: "创新是社会发展的动力", value: "M"}
                    ]
                },
                {
                    id: 25,
                    category: "reality",
                    question: "你认为真理是被发现的还是被创造的？",
                    options: [
                        {text: "真理是客观存在的，需要被发现", value: "U"},
                        {text: "真理是人类创造的，随时代变化", value: "V"}
                    ]
                }
            ];
        }

        // 加载保存的进度
        function loadProgress() {
            const savedProgress = localStorage.getItem('philos_simple_progress');
            if (savedProgress) {
                const progress = JSON.parse(savedProgress);
                currentQuestion = progress.currentQuestion || 0;
                answers = progress.answers || {};
            }
        }

        // 保存进度
        function saveProgress() {
            const progress = {
                currentQuestion,
                answers
            };
            localStorage.setItem('philos_simple_progress', JSON.stringify(progress));
        }

        // 显示当前题目
        function showQuestion() {
            if (currentQuestion >= 0 && currentQuestion < questions.length) {
                const question = questions[currentQuestion];
                
                // 更新题目信息
                document.getElementById('questionNumber').textContent = `第${currentQuestion + 1}题`;
                document.getElementById('questionText').textContent = question.question;
                document.getElementById('optionA').textContent = question.options[0].text;
                document.getElementById('optionB').textContent = question.options[1].text;
                
                // 更新进度条
                const progress = ((currentQuestion + 1) / questions.length) * 100;
                document.getElementById('progressBar').style.width = `${progress}%`;
                document.getElementById('progressText').textContent = `${currentQuestion + 1}/${questions.length}`;
                
                // 更新选项状态
                resetOptions();
                if (answers[currentQuestion]) {
                    const selectedOption = answers[currentQuestion];
                    if (selectedOption === 'A') {
                        document.getElementById('optionA').classList.add('selected');
                    } else {
                        document.getElementById('optionB').classList.add('selected');
                    }
                }
                
                // 更新导航按钮状态
                document.getElementById('prevBtn').disabled = currentQuestion === 0;
                
                if (currentQuestion === questions.length - 1) {
                    document.getElementById('nextBtn').style.display = 'none';
                    document.getElementById('submitBtn').style.display = 'block';
                } else {
                    document.getElementById('nextBtn').style.display = 'block';
                    document.getElementById('submitBtn').style.display = 'none';
                }
            }
        }

        // 重置选项状态
        function resetOptions() {
            document.getElementById('optionA').classList.remove('selected');
            document.getElementById('optionB').classList.remove('selected');
        }

        // 选择选项
        function selectOption(option) {
            answers[currentQuestion] = option;
            saveProgress();
            showQuestion();
        }

        // 上一题
        function prevQuestion() {
            if (currentQuestion > 0) {
                currentQuestion--;
                showQuestion();
            }
        }

        // 下一题
        function nextQuestion() {
            if (currentQuestion < questions.length - 1) {
                // 检查是否已选择答案
                if (!answers[currentQuestion]) {
                    alert('请选择一个选项');
                    return;
                }
                currentQuestion++;
                showQuestion();
            }
        }

        // 提交测试
        function submitTest() {
            // 检查是否所有题目都已回答
            for (let i = 0; i < questions.length; i++) {
                if (!answers[i]) {
                    alert('请回答所有题目');
                    return;
                }
            }
            
            // 计算得分并跳转到结果页面
            calculateScore();
        }

        // 计算得分
        function calculateScore() {
            // 这里会在scoring.js创建后替换为真实逻辑
            // 临时逻辑
            const scores = {
                U: 0, V: 0,
                R: 0, X: 0,
                G: 0, D: 0,
                O: 0, M: 0
            };
            
            // 统计得分
            for (let i = 0; i < questions.length; i++) {
                if (answers[i]) {
                    const optionIndex = answers[i] === 'A' ? 0 : 1;
                    const value = questions[i].options[optionIndex].value;
                    scores[value]++;
                }
            }
            
            // 生成人格代码
            let code = '';
            code += scores.U > scores.V ? 'U' : 'V';
            code += scores.R > scores.X ? 'R' : 'X';
            code += scores.G > scores.D ? 'G' : 'D';
            code += scores.O > scores.M ? 'O' : 'M';
            
            // 保存结果
            localStorage.setItem('philos_result', JSON.stringify({
                code: code,
                scores: scores,
                version: 'simple'
            }));
            
            // 清除进度
            localStorage.removeItem('philos_simple_progress');
            
            // 跳转到结果页面
            window.location.href = 'result.html';
        }

        // 暂停测试
        function pauseTest() {
            if (confirm('确定要暂停测试吗？你的进度会被保存。')) {
                saveProgress();
                window.location.href = 'index.html';
            }
        }
    </script>
</body>
</html>